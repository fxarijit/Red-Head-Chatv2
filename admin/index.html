<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Red Head Chat - Admin</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js"></script>
<script defer>
  const firebaseConfig = {
    apiKey: "AIzaSyA9Hyb4nv6yZcyOqI_azRLB0v31jdO3YvU",
    authDomain: "red-head-7391.firebaseapp.com",
    databaseURL: "https://red-head-7391-default-rtdb.firebaseio.com",
    projectId: "red-head-7391",
    storageBucket: "red-head-7391.firebasestorage.app",
    messagingSenderId: "408168002586",
    appId: "1:408168002586:web:f9920d13106cbe375b8da3",
    measurementId: "G-N6QX49H4KN"
  };
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const adminUsername = "Akash@9872";
  const adminPassword = "Akash@7391";

  function formatTime(ts) {
    const d = new Date(ts);
    const h = d.getHours().toString().padStart(2,'0');
    const m = d.getMinutes().toString().padStart(2,'0');
    return `${h}:${m}`;
  }

  function adminLogin() {
    const username = document.getElementById("adminUsername").value;
    const password = document.getElementById("adminPassword").value;
    if(username === adminUsername && password === adminPassword){
      alert("‚úÖ Admin Login Successful!");
      document.getElementById("adminAuth").classList.add("hidden");
      document.getElementById("adminDashboard").classList.remove("hidden");
      listenAdminChat();
    } else {
      alert("‚ùå Incorrect username or password!");
    }
  }

  function listenAdminChat() {
    const messagesRef = db.ref("chats/public/messages");
    messagesRef.on("child_added", (snapshot) => {
      const msg = snapshot.val();
      const div = document.createElement("div");
      div.className = "max-w-[75%] px-3 py-2 my-1 rounded-xl break-words";
      div.style.alignSelf = msg.sender === "admin" ? "flex-end" : "flex-start";
      div.style.backgroundColor = msg.sender === "admin" ? "#22c55e" : "#3b82f6";
      div.innerHTML = `<span class="font-semibold">${msg.sender}</span>: ${msg.text} <span class="text-xs opacity-70 ml-2">${formatTime(msg.timestamp)}</span>`;
      document.getElementById("messagesAdmin").appendChild(div);
      document.getElementById("messagesAdmin").scrollTop = document.getElementById("messagesAdmin").scrollHeight;
    });
  }

  function sendAdminMsg() {
    const text = document.getElementById("adminMsg").value;
    if(!text) return;
    db.ref("chats/public/messages").push({ sender: "admin", text, timestamp: Date.now() });
    document.getElementById("adminMsg").value = "";
  }

  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("adminLoginButton").addEventListener("click", adminLogin);
    document.getElementById("adminSendButton").addEventListener("click", sendAdminMsg);
  });
</script>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen">

<div class="w-full max-w-2xl p-4 flex flex-col">
  <h1 class="text-3xl font-bold text-center mb-4 text-cyan-400">üõ°Ô∏è Red Head Chat - Admin</h1>

  <div id="adminAuth" class="space-y-2">
    <input id="adminUsername" type="text" placeholder="Username" class="w-full p-2 rounded bg-gray-800 placeholder-gray-400"/>
    <input id="adminPassword" type="password" placeholder="Password" class="w-full p-2 rounded bg-gray-800 placeholder-gray-400"/>
    <button id="adminLoginButton" class="w-full bg-cyan-500 p-2 rounded hover:bg-cyan-400 transition">Login</button>
  </div>

  <div id="adminDashboard" class="hidden flex flex-col flex-grow">
    <input id="searchUser" type="text" placeholder="üîç Search messages..." onkeyup="filterMessages()" class="w-full p-2 rounded mb-2 bg-gray-700 placeholder-gray-400"/>
    <div id="messagesAdmin" class="flex flex-col h-64 overflow-y-auto bg-gray-800 p-3 rounded mb-2"></div>
    <div class
